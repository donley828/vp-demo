<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ServerHub MVC | Run MODULE METHOD</title>
    <meta name="description" content="Fast and reliable MVC framework for Nodejs">
    <link rel="icon" href="/vp-demo/favicon.png">
  <link rel="manifest" href="/vp-demo/manifest.json">
    
    <link rel="preload" href="/vp-demo/assets/css/11.styles.e74c64b6.css" as="style"><link rel="preload" href="/vp-demo/assets/js/app.8cf63ac6.js" as="script"><link rel="preload" href="/vp-demo/assets/js/5.d1e8d316.js" as="script"><link rel="prefetch" href="/vp-demo/assets/js/6.e9a45eb5.js"><link rel="prefetch" href="/vp-demo/assets/js/1.9b84f289.js"><link rel="prefetch" href="/vp-demo/assets/js/2.17d17b7c.js"><link rel="prefetch" href="/vp-demo/assets/js/3.6565e958.js"><link rel="prefetch" href="/vp-demo/assets/js/4.27c7eeaa.js"><link rel="prefetch" href="/vp-demo/assets/js/0.16728135.js"><link rel="prefetch" href="/vp-demo/assets/js/7.15b80c06.js"><link rel="prefetch" href="/vp-demo/assets/js/8.181b59d0.js"><link rel="prefetch" href="/vp-demo/assets/js/9.1b6de168.js"><link rel="prefetch" href="/vp-demo/assets/js/10.e8f9445f.js">
    <link rel="stylesheet" href="/vp-demo/assets/css/11.styles.e74c64b6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/vp-demo/" class="home-link router-link-active"><!----><span class="site-name">
      ServerHub MVC
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/vp-demo/tutorial/" class="nav-link">Tutorial</a></div><div class="nav-item"><a href="/vp-demo/documention/" class="nav-link router-link-active">Documention</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/vp-demo/documention/run-module-method.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----><a href="/vp-demo/zh/" class="nav-link">简体中文</a></li></ul></div></div><a href="https://github.com/ServerHubOrg/serverhub-mvc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vp-demo/tutorial/" class="nav-link">Tutorial</a></div><div class="nav-item"><a href="/vp-demo/documention/" class="nav-link router-link-active">Documention</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/vp-demo/documention/run-module-method.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----><a href="/vp-demo/zh/" class="nav-link">简体中文</a></li></ul></div></div><a href="https://github.com/ServerHubOrg/serverhub-mvc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Documention</span><!----></p><ul class="sidebar-group-items"><li><a href="/vp-demo/documention/" class="sidebar-link">Documention</a></li><li><a href="/vp-demo/documention/run-module-method.html" class="active sidebar-link">Run MODULE METHOD</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vp-demo/documention/run-module-method.html#serverhub-run" class="sidebar-link">ServerHub.Run()</a></li><li class="sidebar-sub-header"><a href="/vp-demo/documention/run-module-method.html#instance-run" class="sidebar-link">Instance.Run()</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vp-demo/documention/run-module-method.html#as-simple-as-possible" class="sidebar-link">As simple as possible</a></li><li class="sidebar-sub-header"><a href="/vp-demo/documention/run-module-method.html#other-properties" class="sidebar-link">Other properties</a></li></ul></li></ul></li><li><a href="/vp-demo/documention/controller.html" class="sidebar-link">CONTROLLERS</a></li><li><a href="/vp-demo/documention/route.html" class="sidebar-link">ROUTE</a></li><li><a href="/vp-demo/documention/plugin.html" class="sidebar-link">Plugin System Introduction</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="run-module-method"><a href="#run-module-method" aria-hidden="true" class="header-anchor">#</a> Run MODULE METHOD</h1><h2 id="serverhub-run"><a href="#serverhub-run" aria-hidden="true" class="header-anchor">#</a> ServerHub.Run()</h2><p><a href="/vp-demo/tutorial/Instance.Run().html">view this</a></p><h2 id="instance-run"><a href="#instance-run" aria-hidden="true" class="header-anchor">#</a> Instance.Run()</h2><p>ConfigThe other day, I introduced <code>instance.Run()</code> method to you. And in this chapter, we will talk about the first parameter of <code>instance.Run()</code> method - the configuration object.</p><h3 id="as-simple-as-possible"><a href="#as-simple-as-possible" aria-hidden="true" class="header-anchor">#</a> As simple as possible</h3><p>Not like what we've seen in <a href="/vp-demo/tutorial/Instance.Run().html">Instance.Run()</a> chapter, the configuraton object is much too complicated. And in fact, there is only one property that is required: <code>BaseDir</code>.</p><p><code>BaseDir</code> is the root path of server, which will be used during the whole life circle of your ServerHub application. If your current entry file, such as <code>app.js</code>, is just located in the directory that you want to use as server root. Then the value should be <code>__dirname</code>, which is a global variable of Node.js.</p><p>This is the simplest configuration that can make ServerHub work functional normally.</p><h3 id="other-properties"><a href="#other-properties" aria-hidden="true" class="header-anchor">#</a> Other properties</h3><p>To customize ServerHub, you need some extra configurations.</p><h4 id="webdir"><a href="#webdir" aria-hidden="true" class="header-anchor">#</a> WebDir</h4><p><code>WebDir</code> is website directory. Your page files, contents, scripts and assets should be put in this directory. ServerHub uses &quot;www/&quot; as its default value. If you want to set up a new website root directory, create a folder and pass its name to <code>WebDir</code> property.</p><h4 id="controllerdir"><a href="#controllerdir" aria-hidden="true" class="header-anchor">#</a> ControllerDir</h4><p>We all know that ServerHub routes request to controllers. If we want them to be registered, we have to provide the contain directory name to ServerHub. The path of controller directory should be relative to server root path. If you don't specify one, the default value will be &quot;controller/&quot;.</p><h4 id="controllers"><a href="#controllers" aria-hidden="true" class="header-anchor">#</a> Controllers</h4><p>Sometimes, we don't want to register every controller in the contain folder. Then we can pass an array of required controller file name to this parameter. eg: <code>['home.js', 'data.js']</code>. But if you want all controller files to be registered, just ignore <code>Controllers</code> property and ServerHub will automatically scan and register every file under <code>ControllerDir</code>.</p><h4 id="viewdir-and-modeldir"><a href="#viewdir-and-modeldir" aria-hidden="true" class="header-anchor">#</a> ViewDir and ModelDir</h4><p>Pretty similar to <code>ControllerDir</code> in previous section. They are used to hold view files and models.</p><h4 id="dbprovider"><a href="#dbprovider" aria-hidden="true" class="header-anchor">#</a> DBProvider</h4><p>Specify your database provider. In current version, ServerHub only supports MySQL, which means the only valid value would be &quot;mysql&quot;.</p><h4 id="dbconnectionstring"><a href="#dbconnectionstring" aria-hidden="true" class="header-anchor">#</a> DBConnectionString</h4><p>If you have only one database instance to connect, the suggested way is to pass a global database connection string to ServerHub. Because if you don't, you will have to provide a value every time you call <code>GetConnection()</code> method on your database provider.</p><h4 id="maxcachesize"><a href="#maxcachesize" aria-hidden="true" class="header-anchor">#</a> MaxCacheSize</h4><p>This specifies how much memory can ServerHub caching system allocate. If file sizes exceeded this limit, then ServerHub will call WCS to unload some unnecessary caches. This will be covered in later chapters.</p><h4 id="defaultpages"><a href="#defaultpages" aria-hidden="true" class="header-anchor">#</a> DefaultPages</h4><p>ServerHub uses a fallback strategy for default pages. And your default page file must be put under the root of <code>WebDir</code> directory. In default, ServerHub uses &quot;index.html&quot; first, then &quot;default.html&quot; and finally &quot;page.html&quot;. You can override this configuration by passing an array like <code>['hello.html', 'first.html']</code> to this property.</p><h4 id="pagenotfound-v0-0-93"><a href="#pagenotfound-v0-0-93" aria-hidden="true" class="header-anchor">#</a> PageNotFound <code>v0.0.93+</code></h4><p>When the request does not match any resources or route rules, ServerHub will render an error page to the response. From v0.0.93, you can add your custom error page to ServerHub server directory and specify with this property.</p><p>More property definitions are coming soon.</p><h4 id="asyncoperationtimeout-v0-0-97"><a href="#asyncoperationtimeout-v0-0-97" aria-hidden="true" class="header-anchor">#</a> AsyncOperationTimeout <code>v0.0.97+</code></h4><p>In <code>v0.0.96</code>, we introduced <code>this.Runtime.WAIT</code> signal to be the workaroud for some time consuming asynchronous operations, such as database query etc. But you should know this signal is pretty dangrous. What if you <code>forget</code> to set false to it or the operation takes too much time and dead before callback? So, ServerHub has to count down as a backup operation if it cost too much time. The default value is 10 seconds. If you want it to be shorter or longer, just pass the value to the configuration parameter.(Unit: <strong>milliseconds</strong>)</p><h4 id="tlsoption-v1-0-6"><a href="#tlsoption-v1-0-6" aria-hidden="true" class="header-anchor">#</a> TLSOption <code>v1.0.6+</code></h4><p>Since <code>v1.0.6</code>, ServerHub enhanced security with TLS/SSL. You may secure the connection with a <code>TLSOption</code> property. This property has four sub-properties: <code>Key: string, Cert: string, CA: string</code>x and <code>Port: Array&lt;string&gt;|Array&lt;number&gt;|number|string</code>. You need to load your private key and certificate files and assign their values to the properties above. And most importantly, you need to specify the port you want to secure.</p></div><div class="content edit-link"><a href="https://github.com/ServerHubOrg/serverhub-docs/edit/dev/docs/documention/run-module-method.md" target="_blank" rel="noopener noreferrer">Edit this page on Github</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/vp-demo/documention/" class="prev router-link-active">
          Documention
        </a></span><span class="next"><a href="/vp-demo/documention/controller.html">
          CONTROLLERS
        </a> →
      </span></p></div></div></div></div>
    <script src="/vp-demo/assets/js/5.d1e8d316.js" defer></script><script src="/vp-demo/assets/js/app.8cf63ac6.js" defer></script>
  </body>
</html>
